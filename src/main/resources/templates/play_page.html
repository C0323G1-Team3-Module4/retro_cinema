<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Film Details</title>
    <!-- Link CSS -->
    <link rel="stylesheet" href="/css/home.css" />
    <!-- Box Icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
    />
    <!-- or -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@latest/css/boxicons.min.css"
    />
    <style>
      .content {
        margin-top: 1rem;
      }

    </style>

  </head>
  <body>
  <!-- Header -->
  <header>
    <!-- Navigation Bar -->
    <div class="nav container">
      <!-- Logo -->
      <a href="/" class="logo"> Retro<span>Cinema</span> </a>
      <!-- Search Box -->
      <div class="search-box">
        <input
                type="search"
                th:name="name"
                id="search-input"
                placeholder="Search Movie"
        />
        <i class="bx bx-search" onclick="toSearch()"></i>
      </div>
      <!-- User -->
      <div>

      </div>
      <a href="#" class="user">
        <img th:if="${#request.userPrincipal == null}"
             src="https://cdn.landesa.org/wp-content/uploads/default-user-image.png"
             alt="user-img"
             class="user-img"
        />
        <img th:if="${#request.userPrincipal !=null}"
             src="https://cdn2.iconfinder.com/data/icons/audio-16/96/user_avatar_profile_login_button_account_member-512.png"
             alt="user-img"
             class="user-img">
        <span th:if="${#request.userPrincipal == null}" class="user-info" onclick="toLogin()">Login</span>
        <span th:if="${#request.userPrincipal !=null}" th:text="${#request.userPrincipal.getName()}"
              class="user-info"></span>
        <!-- Dropdown list Start -->
        <div th:if="${#request.userPrincipal!=null}" class="dropdown-list">
          <div class="dropdown-item" th:if="${#request.isUserInRole('ROLE_ADMIN')}">
            <i class="bx bx-cog"></i>
            <div class="dropdown-text" onclick="toPreference()">Preferences</div>
          </div>
          <div class="dropdown-item" th:if="${#request.isUserInRole('ROLE_USER')}">
            <i class="bx bx-cog"></i>
            <input type="hidden" id="name" th:value="${#request.userPrincipal.getName()}" />
            <div class="dropdown-text" onclick="toDetailUser()">Preferences</div>
          </div>
          <div class="dropdown-item">
            <i class="bx bx-log-out-circle"></i>
            <div class="dropdown-text" onclick="toLogout()">Log out</div>
          </div>
        </div>
        <!-- Dropdown list end -->
      </a>
      <!-- Nav bar column -->
      <div class="navbar">
        <a href="/" class="nav-link nav-active">
          <i class="bx bx-home"></i>
          <span class="nav-link-title">Home</span>
        </a>
        <a href="#home" class="nav-link">
          <i class="bx bxs-hot"></i>
          <span class="nav-link-title">Upcoming</span>
        </a>
        <a href="#home" class="nav-link">
          <i class="bx bx-camera-movie"></i>
          <span class="nav-link-title">Onscreen</span>
        </a>
        <a href="#home" class="nav-link">
          <i class="bx bx-heart"></i>
          <span class="nav-link-title">Favorite</span>
        </a>
      </div>
    </div>
  </header>

    <!-- Play Movie Container -->
    <div class="play-container container">
      <!-- Play Image -->
      <img
        th:src="${movie.imgTrailer}"
        alt=""
        class="play-img"
      />
      <!-- Play Text -->
      <div class="play-text">
        <h2 th:text="${movie.getMovieName()}"></h2>
        <!-- Ratings -->
        <div class="rating">
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star-half"></i>
        </div>
        <!-- Tags -->
        <div class="tags">
          <span th:text="${movie.movieTypes.getMovieTypes()}"></span>
          <span>4K</span>
        </div>
        <!-- Trailer Button -->
<!--        <span th:if="${#request.userPrincipal == null}" class="user-info" onclick="toLogin()">-->
<!--          <i class='bx bx-cart'></i>-->
<!--          <span>Booking</span>-->
<!--        </span>-->
        <span th:if="${#request.userPrincipal == null}" class="promo-button" onclick="toLogin()">
          <i class='bx bx-cart'></i>
          <span>Booking</span>
        </span>
        <span th:if="${#request.userPrincipal !=null}">
        <a th:href="@{/home/screening/__${movie.id}__}" class="promo-button">
          <i class='bx bx-cart'></i>
          <span>Booking</span>
        </a></span>
      </div>

      <!-- Play Button -->
      <i class="bx bx-play-circle play-movie"></i>

      <!-- Video Container -->
      <div class="video-container">
        <!-- Video-box -->
        <div class="video-box">
          <video
            id="myvideo"
            th:src="${movie.trailer}"
            controls
          ></video>
          <!-- Close Video Icon -->
          <i class="bx bx-x close-video"></i>
        </div>
      </div>
    </div>

    <div class="content container">
      <div class="content-text">
        <span style="color: var(--main-color)">Director :</span>
        <span style="padding-left: 0.3rem" th:text="${movie.getDirector()}"></span>
      </div>
    </div>

    <div class="content container">
      <div class="content-text">
        <span style="color: var(--main-color)">Performers:</span>
        <span style="padding-left: 0.3rem" th:text="${movie.getPerformer()}"></span>
      </div>
    </div>

    <div class="content container">
      <div class="content-text">
        <p style="color: var(--main-color)">Description:</p>
        <p th:text="${movie.getDescription()}"></p>
      </div>
    </div>
    <!-- Footer -->
    <footer>
      <div class="info container">
        <div class="info-text">
          <p>280 Tran Hung Dao Street, Da Nang City, Viet Nam</p>
          <p>RETRO CINEMA &copy; COPYRIGHT 2023 ALL RIGHTS RESERVED</p>
        </div>
        <div class="info-logo">
          <a href="https://www.facebook.com" class="info-logo-item"
            ><i class="bx bxl-facebook-square"></i
          ></a>
          <a href="https://www.instagram.com" class="info-logo-item"
            ><i class="bx bxl-instagram"></i
          ></a>
          <a href="https://www.youtube.com" class="info-logo-item"
            ><i class="bx bxl-youtube"></i
          ></a>
        </div>
      </div>
    </footer>

    <!-- Link Swiper JS -->
    <script src="/js/swiper-bundle.min.js"></script>
    <!-- Link to main js -->
    <script src="/js/home.js"></script>
  </body>
  <script>
    function toLogin() {
      window.location.href = "/login";
    }

    function toLogout() {
      window.location.href = "/logout";
    }

    function toPreference() {
      window.location.href = "/preference";
    }

    function toCustomerDetails() {
      document.getElementById("toCustomerPreference").submit();
    }
    function toSearch() {
      let name = document.getElementById("search-input").value;
      window.location.href = "?name="+name;
    }
  </script>
</html>
